{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/sales.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction SalesComponent_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function SalesComponent_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      ctx_r2.resetForm();\n      return i0.ɵɵresetView(ctx_r2.editingId = null);\n    });\n    i0.ɵɵtext(1, \" Cancel \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SalesComponent_tr_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\")(16, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function SalesComponent_tr_31_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const s_r4 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.editSale(s_r4));\n    });\n    i0.ɵɵtext(17, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function SalesComponent_tr_31_Template_button_click_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const s_r4 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.deleteSale(s_r4.id));\n    });\n    i0.ɵɵtext(19, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const s_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r5 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r4.invoiceNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r4.customerName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r4.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r4.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r4.totalPrice);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r4.saleDate);\n  }\n}\nexport let SalesComponent = /*#__PURE__*/(() => {\n  class SalesComponent {\n    salesService;\n    sales = [];\n    editingId = null;\n    newSale = {\n      invoiceNumber: '',\n      customerName: '',\n      productName: '',\n      quantity: 1,\n      totalPrice: 0,\n      saleDate: new Date().toISOString().substring(0, 10)\n    };\n    constructor(salesService) {\n      this.salesService = salesService;\n    }\n    ngOnInit() {\n      this.loadSales();\n    }\n    loadSales() {\n      this.salesService.getAll().subscribe(data => this.sales = data);\n    }\n    calculateTotal() {\n      // e.g. if you had a unitPrice field you could do:\n      // this.newSale.totalPrice = this.newSale.unitPrice * this.newSale.quantity;\n    }\n    onSubmit() {\n      if (this.editingId !== null) {\n        this.salesService.updateSale(this.editingId, this.newSale).subscribe(() => this.afterSave());\n      } else {\n        this.salesService.add(this.newSale).subscribe(() => this.afterSave());\n      }\n    }\n    afterSave() {\n      this.loadSales();\n      this.resetForm();\n      this.editingId = null;\n    }\n    editSale(s) {\n      this.editingId = s.id;\n      this.newSale = {\n        ...s\n      };\n    }\n    deleteSale(id) {\n      if (!id) return;\n      this.salesService.delete(id).subscribe(() => this.loadSales());\n    }\n    resetForm() {\n      this.newSale = {\n        invoiceNumber: '',\n        customerName: '',\n        productName: '',\n        quantity: 1,\n        totalPrice: 0,\n        saleDate: new Date().toISOString().substring(0, 10)\n      };\n    }\n    static ɵfac = function SalesComponent_Factory(t) {\n      return new (t || SalesComponent)(i0.ɵɵdirectiveInject(i1.SalesService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SalesComponent,\n      selectors: [[\"app-sales\"]],\n      decls: 32,\n      vars: 4,\n      consts: [[1, \"sales-container\"], [3, \"ngSubmit\"], [\"type\", \"submit\"], [\"type\", \"button\", 3, \"click\", 4, \"ngIf\"], [1, \"table-responsive\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 3, \"click\"], [3, \"click\"]],\n      template: function SalesComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"form\", 1);\n          i0.ɵɵlistener(\"ngSubmit\", function SalesComponent_Template_form_ngSubmit_3_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(4, \"button\", 2);\n          i0.ɵɵtext(5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(6, SalesComponent_button_6_Template, 2, 0, \"button\", 3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(7, \"hr\");\n          i0.ɵɵelementStart(8, \"h2\");\n          i0.ɵɵtext(9, \"Sales History\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 4)(11, \"table\")(12, \"thead\")(13, \"tr\")(14, \"th\");\n          i0.ɵɵtext(15, \"#\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"th\");\n          i0.ɵɵtext(17, \"Invoice\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"th\");\n          i0.ɵɵtext(19, \"Customer\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"th\");\n          i0.ɵɵtext(21, \"Product\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"th\");\n          i0.ɵɵtext(23, \"Qty\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"th\");\n          i0.ɵɵtext(25, \"Total\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"th\");\n          i0.ɵɵtext(27, \"Date\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"th\");\n          i0.ɵɵtext(29, \"Actions\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(30, \"tbody\");\n          i0.ɵɵtemplate(31, SalesComponent_tr_31_Template, 20, 7, \"tr\", 5);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.editingId !== null ? \"Edit Sale\" : \"Add Sale\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\" \", ctx.editingId !== null ? \"Update Sale\" : \"Save Sale\", \" \");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.editingId !== null);\n          i0.ɵɵadvance(25);\n          i0.ɵɵproperty(\"ngForOf\", ctx.sales);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm],\n      styles: [\".container-wrap[_ngcontent-%COMP%]{display:flex;margin-top:60px;padding:20px;gap:20px}nav.sidebar[_ngcontent-%COMP%]{flex:0 0 200px;background-color:#263238;border-radius:8px;padding:20px}.main-content[_ngcontent-%COMP%]{flex:1}.container[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:8px;box-shadow:0 4px 20px #0000001a}.page-title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;margin-bottom:20px;color:#007bff}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:10px 0 5px;font-weight:600}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:6px;margin-bottom:15px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px;background-color:#1976d2;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:background-color .2s}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto;margin-top:20px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px;border:1px solid #ddd;text-align:left}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.fixed-top-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:60px;background-color:#212529;display:flex;align-items:center;justify-content:center;z-index:1000}.fixed-top-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#ffc107;font-size:24px}\"]\n    });\n  }\n  return SalesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}